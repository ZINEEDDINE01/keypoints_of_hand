# Hand Keypoints Detection and Annotation

This repository provides a system for detecting hand keypoints using MediaPipe, saving the keypoints in a structured JSON format, and annotating images with these keypoints. The system includes multiple scripts that handle different stages of the image processing pipeline, such as keypoint extraction, CSV output, and JSON generation for annotation.

## Features

- **Keypoint Detection**: Detects 21 keypoints of hands using MediaPipe and processes images in `.png`, `.bmp`, `.jpg` formats.
- **Image Annotation**: Annotates images by drawing keypoints and skeleton connections using the detected landmarks.
- **CSV and JSON Outputs**: Saves keypoints in both CSV format and a structured JSON file.
- **Multiple Processing Scripts**: Provides different scripts for extracting keypoints, saving them as CSV/JSON, and drawing annotations.

## Directory Structure

```bash
├── 21keypoints.py                # Extracts hand keypoints and saves them to a CSV file.
├── 21keypointsTest.py            # Extracts keypoints, saves to CSV, and annotates images with keypoints.
├── 21keypointswithjsonoutput.py  # Generates and saves keypoints data in JSON format.
├── usejsonfordraw.py             # Annotates images based on JSON data.
├── dataset_test/                 # Folder containing input images.
├── dataset_test_keypoints/       # Folder for saving annotated images.
├── hand_keypoints.csv            # CSV file to store extracted keypoints.
└── hand_keypoints.json           # JSON file containing keypoints data.
```

## Installation

### 1. Prerequisites

You need Python and the following libraries:

- `opencv-python`
- `mediapipe`
- `json` (built-in)

Install the required dependencies:

```bash
pip install opencv-python mediapipe
```

### 2. File Structure

Your project should look like this:

```bash
Demo_Project/
├── 21keypoints.py
├── 21keypointsTest.py
├── 21keypointswithjsonoutput.py
├── usejsonfordraw.py
├── dataset_test/
├── dataset_test_keypoints/
└── README.md
```

### 3. Running the Scripts

1. **Run `21keypoints.py`** to extract keypoints and save them in CSV format:

```bash
python 21keypoints.py
```

2. **Run `21keypointsTest.py`** to extract keypoints, save them in CSV format, and annotate the images:

```bash
python 21keypointsTest.py
```

3. **Run `21keypointswithjsonoutput.py`** to generate and save keypoints data in JSON format:

```bash
python 21keypointswithjsonoutput.py
```

4. **Run `usejsonfordraw.py`** to annotate images using the JSON data generated in the previous step:

```bash
python usejsonfordraw.py
```

## Usage

### 1. `21keypoints.py`

This script processes images and saves the extracted keypoints in a CSV file. The CSV contains the filename, hand index, keypoint index, and the x, y, z coordinates of each keypoint.

### 2. `21keypointsTest.py`

This script processes the images, draws the detected keypoints on the images, and saves the annotated images. It also writes the extracted keypoints to a CSV file.

### 3. `21keypointswithjsonoutput.py`

This script generates and saves the keypoints data in a JSON format. The JSON structure contains the filename and keypoints for each image, organized by hand index.

### 4. `usejsonfordraw.py`

This script reads the JSON file generated by `21keypointswithjsonoutput.py`, draws the keypoints on the original images, and saves the annotated images in the `dataset_test_keypoints` folder.

## Notes

- Ensure that the `dataset_test` folder contains the images you want to process.
- The script will process images with the following file extensions: `.png`, `.jpg`, `.jpeg`, `.bmp`.
- You can modify the dataset folder and output paths in the script if needed.
